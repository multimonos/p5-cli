{"version":3,"file":"main.umd.js","sources":["../src/ArgumentError.js","../src/Command.js","../src/Command/Templates.js","../src/Command/Clone.js","../src/Command/Serve.js","../node_modules/p-try/index.js","../node_modules/p-limit/index.js","../node_modules/p-locate/index.js","../node_modules/locate-path/index.js","../node_modules/path-exists/index.js","../node_modules/find-up/index.js","../src/config.js","../src/Command/Config.js","../src/main.js"],"sourcesContent":["export default class ArgumentError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'ArgumentError';\n    }\n}\n","import chalk from 'chalk'\nimport logicon from 'log-utils'\n\nexport default class Command {\n\n    run(config) {\n        console.log(\"first argument to run() is always 'config'\")\n        return this\n    }\n\n    title(title) {\n        console.log(chalk.magenta(`\\n${title}:`))\n        return this\n    }\n\n    info(msg) {\n        console.log(` ${logicon.info} ${msg}`)\n        return this\n    }\n\n    error(msg) {\n        console.log(chalk.red(` ${logicon.error} ${msg}`))\n        return this\n    }\n\n    success(msg) {\n        console.log(chalk.green(` ${logicon.success} ${msg}`))\n        return this\n    }\n\n    warning(msg) {\n        console.log(chalk.yellow(` ${logicon.warning} ${msg}`))\n        return this\n    }\n\n    close() {\n        this.success('done\\n')\n        return this\n    }\n}","import fs from 'fs'\nimport path from 'path'\nimport chalk from 'chalk'\nimport Command from \"../Command\";\n\nexport default class TemplatesCommand extends Command {\n\n    run(config) {\n        this.templatePaths(config.templates.path)\n            .map(filepath => {\n                this.info(`${chalk.blue(path.basename(filepath))} -> ${filepath}`)\n            })\n        return this\n    }\n\n\n    templatePaths(folder) {\n        const paths = []\n        fs.readdirSync(folder).forEach(file => {\n            const filepath = `${folder}/${file}`\n            if (fs.statSync(filepath).isDirectory()) {\n                paths.push(fs.realpathSync(filepath))\n            }\n        });\n        return paths;\n    }\n\n}","import Command from \"../Command\";\nimport chalk from 'chalk'\nimport path from 'path'\nimport fs from 'fs'\nimport _ from 'lodash'\nimport copydir from 'copy-dir'\nimport mkdirp from 'mkdirp'\n\nexport default class CloneCommand extends Command {\n\n    run(config, templateName, target) {\n        const templates = this.templates(fs.realpathSync(config.templates.path))\n\n        if ( ! this.has(templateName, templates)) {\n            return this.error(`template not found ${templateName}`)\n        }\n\n        this.info(`cloning template ${chalk.blue(templateName)}`)\n\n        target = this.createTargetFolder(target)\n\n        const template = this.resolve(templateName, templates)\n\n        this.clone(template.path, target)\n\n        this.info(`To run sketch use: cd ${target} && npm install && npm run serve`)\n\n        return this\n    }\n\n    createTargetFolder(folder) {\n\n        if ( ! fs.existsSync(folder)) {\n            mkdirp(folder)\n\n        } else {\n            folder = this.autoIncrementFoldername(folder)\n            mkdirp(folder)\n        }\n\n        return folder\n    }\n\n    resolve(name, templates) {\n        return _.find(templates, {\"name\": name})\n    }\n\n    has(name, templates) {\n        return this.resolve(name, templates) !== undefined\n    }\n\n    clone(src, dst) {\n        copydir.sync(src, dst, {\n                filter: (stat, filepath, filename) => {\n                    if (stat === 'file') {\n                        this.info(`copying ${filepath} -> ${chalk.green(dst + '/' + filename)}`)\n                    }\n                    return true\n                }\n            }\n        )\n    }\n\n    templateNames(dir) {\n        return this.templates(dir).map(tpl => tpl.name)\n    }\n\n    templates(dir) {\n        const paths = []\n        fs.readdirSync(dir).forEach(fname => {\n            const fpath = `${dir}/${fname}`\n            if (fs.statSync(fpath).isDirectory()) {\n                paths.push({name: fname, path: fs.realpathSync(fpath)})\n            }\n        });\n        return paths;\n    }\n\n    autoIncrementFoldername(candidate) {\n        let i = 1;\n        let filepath = candidate;\n\n        while (fs.existsSync(filepath)) {\n            this.warning(`exists ${filepath}`)\n            const tag = i.toString().padStart(2, '0');\n            filepath = `${candidate}-${tag}`;\n            i++;\n        }\n\n        this.success(`target ${filepath}`)\n\n        return filepath\n    }\n\n}","import Command from \"../Command\";\nimport fs from 'fs'\nimport path from 'path'\nimport {spawn, exec} from \"child_process\";\nimport APP_ROOT from 'app-root-path'\n\n\nexport default class ServeCommand extends Command {\n\n    run(config, entry) {\n        const entrypoint = this.guessEntrypoint(entry)\n        const entrydir = path.dirname(entrypoint)\n\n        if ( ! entrypoint) {\n            this.error('entry: missing entry point')\n            this.error('...    expected <sketch-path> to be something like /path/to/sketch/index.html')\n            return this\n        }\n\n        const cmd = `${APP_ROOT}/node_modules/.bin/parcel ${entrypoint} --out-dir ${config.serve.output} --cache-dir ${config.serve.cache}` // necessary to be specific with path otherwise spawn is very very slow\n\n        this.info(`entry: ${entrypoint}`)\n        this.info(`${cmd}`)\n        this.success('building files ... ( this might take a while )')\n\n        this.spawn(cmd)\n\n        return this\n    }\n\n    outputDirectory(src) {\n        return src\n    }\n\n    guessEntrypoint(src) {\n        src = fs.realpathSync(src)\n\n        const stats = fs.lstatSync(src)\n\n        if (stats.isFile()) {\n            return src\n        }\n\n        if (stats.isDirectory()) {\n            const candidate = path.join(src, 'index.html')\n\n            if (fs.existsSync(candidate)) {\n                return candidate\n            }\n        }\n\n        return undefined\n    }\n\n    spawn(cmd) {\n        spawn(cmd, {\n            stdio: 'inherit',\n            shell: true\n        })\n    }\n\n}","'use strict';\n\nconst pTry = (fn, ...arguments_) => new Promise(resolve => {\n\tresolve(fn(...arguments_));\n});\n\nmodule.exports = pTry;\n// TODO: remove this in the next major version\nmodule.exports.default = pTry;\n","'use strict';\nconst pTry = require('p-try');\n\nconst pLimit = concurrency => {\n\tif (!((Number.isInteger(concurrency) || concurrency === Infinity) && concurrency > 0)) {\n\t\treturn Promise.reject(new TypeError('Expected `concurrency` to be a number from 1 and up'));\n\t}\n\n\tconst queue = [];\n\tlet activeCount = 0;\n\n\tconst next = () => {\n\t\tactiveCount--;\n\n\t\tif (queue.length > 0) {\n\t\t\tqueue.shift()();\n\t\t}\n\t};\n\n\tconst run = (fn, resolve, ...args) => {\n\t\tactiveCount++;\n\n\t\tconst result = pTry(fn, ...args);\n\n\t\tresolve(result);\n\n\t\tresult.then(next, next);\n\t};\n\n\tconst enqueue = (fn, resolve, ...args) => {\n\t\tif (activeCount < concurrency) {\n\t\t\trun(fn, resolve, ...args);\n\t\t} else {\n\t\t\tqueue.push(run.bind(null, fn, resolve, ...args));\n\t\t}\n\t};\n\n\tconst generator = (fn, ...args) => new Promise(resolve => enqueue(fn, resolve, ...args));\n\tObject.defineProperties(generator, {\n\t\tactiveCount: {\n\t\t\tget: () => activeCount\n\t\t},\n\t\tpendingCount: {\n\t\t\tget: () => queue.length\n\t\t},\n\t\tclearQueue: {\n\t\t\tvalue: () => {\n\t\t\t\tqueue.length = 0;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn generator;\n};\n\nmodule.exports = pLimit;\nmodule.exports.default = pLimit;\n","'use strict';\nconst pLimit = require('p-limit');\n\nclass EndError extends Error {\n\tconstructor(value) {\n\t\tsuper();\n\t\tthis.value = value;\n\t}\n}\n\n// The input can also be a promise, so we await it\nconst testElement = async (element, tester) => tester(await element);\n\n// The input can also be a promise, so we `Promise.all()` them both\nconst finder = async element => {\n\tconst values = await Promise.all(element);\n\tif (values[1] === true) {\n\t\tthrow new EndError(values[0]);\n\t}\n\n\treturn false;\n};\n\nconst pLocate = async (iterable, tester, options) => {\n\toptions = {\n\t\tconcurrency: Infinity,\n\t\tpreserveOrder: true,\n\t\t...options\n\t};\n\n\tconst limit = pLimit(options.concurrency);\n\n\t// Start all the promises concurrently with optional limit\n\tconst items = [...iterable].map(element => [element, limit(testElement, element, tester)]);\n\n\t// Check the promises either serially or concurrently\n\tconst checkLimit = pLimit(options.preserveOrder ? 1 : Infinity);\n\n\ttry {\n\t\tawait Promise.all(items.map(element => checkLimit(finder, element)));\n\t} catch (error) {\n\t\tif (error instanceof EndError) {\n\t\t\treturn error.value;\n\t\t}\n\n\t\tthrow error;\n\t}\n};\n\nmodule.exports = pLocate;\n// TODO: Remove this for the next major release\nmodule.exports.default = pLocate;\n","'use strict';\nconst path = require('path');\nconst fs = require('fs');\nconst {promisify} = require('util');\nconst pLocate = require('p-locate');\n\nconst fsStat = promisify(fs.stat);\nconst fsLStat = promisify(fs.lstat);\n\nconst typeMappings = {\n\tdirectory: 'isDirectory',\n\tfile: 'isFile'\n};\n\nfunction checkType({type}) {\n\tif (type in typeMappings) {\n\t\treturn;\n\t}\n\n\tthrow new Error(`Invalid type specified: ${type}`);\n}\n\nconst matchType = (type, stat) => type === undefined || stat[typeMappings[type]]();\n\nmodule.exports = async (paths, options) => {\n\toptions = {\n\t\tcwd: process.cwd(),\n\t\ttype: 'file',\n\t\tallowSymlinks: true,\n\t\t...options\n\t};\n\tcheckType(options);\n\tconst statFn = options.allowSymlinks ? fsStat : fsLStat;\n\n\treturn pLocate(paths, async path_ => {\n\t\ttry {\n\t\t\tconst stat = await statFn(path.resolve(options.cwd, path_));\n\t\t\treturn matchType(options.type, stat);\n\t\t} catch (_) {\n\t\t\treturn false;\n\t\t}\n\t}, options);\n};\n\nmodule.exports.sync = (paths, options) => {\n\toptions = {\n\t\tcwd: process.cwd(),\n\t\tallowSymlinks: true,\n\t\ttype: 'file',\n\t\t...options\n\t};\n\tcheckType(options);\n\tconst statFn = options.allowSymlinks ? fs.statSync : fs.lstatSync;\n\n\tfor (const path_ of paths) {\n\t\ttry {\n\t\t\tconst stat = statFn(path.resolve(options.cwd, path_));\n\n\t\t\tif (matchType(options.type, stat)) {\n\t\t\t\treturn path_;\n\t\t\t}\n\t\t} catch (_) {\n\t\t}\n\t}\n};\n","'use strict';\nconst fs = require('fs');\nconst {promisify} = require('util');\n\nconst pAccess = promisify(fs.access);\n\nmodule.exports = async path => {\n\ttry {\n\t\tawait pAccess(path);\n\t\treturn true;\n\t} catch (_) {\n\t\treturn false;\n\t}\n};\n\nmodule.exports.sync = path => {\n\ttry {\n\t\tfs.accessSync(path);\n\t\treturn true;\n\t} catch (_) {\n\t\treturn false;\n\t}\n};\n","'use strict';\nconst path = require('path');\nconst locatePath = require('locate-path');\nconst pathExists = require('path-exists');\n\nconst stop = Symbol('findUp.stop');\n\nmodule.exports = async (name, options = {}) => {\n\tlet directory = path.resolve(options.cwd || '');\n\tconst {root} = path.parse(directory);\n\tconst paths = [].concat(name);\n\n\tconst runMatcher = async locateOptions => {\n\t\tif (typeof name !== 'function') {\n\t\t\treturn locatePath(paths, locateOptions);\n\t\t}\n\n\t\tconst foundPath = await name(locateOptions.cwd);\n\t\tif (typeof foundPath === 'string') {\n\t\t\treturn locatePath([foundPath], locateOptions);\n\t\t}\n\n\t\treturn foundPath;\n\t};\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\t// eslint-disable-next-line no-await-in-loop\n\t\tconst foundPath = await runMatcher({...options, cwd: directory});\n\n\t\tif (foundPath === stop) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (foundPath) {\n\t\t\treturn path.resolve(directory, foundPath);\n\t\t}\n\n\t\tif (directory === root) {\n\t\t\treturn;\n\t\t}\n\n\t\tdirectory = path.dirname(directory);\n\t}\n};\n\nmodule.exports.sync = (name, options = {}) => {\n\tlet directory = path.resolve(options.cwd || '');\n\tconst {root} = path.parse(directory);\n\tconst paths = [].concat(name);\n\n\tconst runMatcher = locateOptions => {\n\t\tif (typeof name !== 'function') {\n\t\t\treturn locatePath.sync(paths, locateOptions);\n\t\t}\n\n\t\tconst foundPath = name(locateOptions.cwd);\n\t\tif (typeof foundPath === 'string') {\n\t\t\treturn locatePath.sync([foundPath], locateOptions);\n\t\t}\n\n\t\treturn foundPath;\n\t};\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tconst foundPath = runMatcher({...options, cwd: directory});\n\n\t\tif (foundPath === stop) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (foundPath) {\n\t\t\treturn path.resolve(directory, foundPath);\n\t\t}\n\n\t\tif (directory === root) {\n\t\t\treturn;\n\t\t}\n\n\t\tdirectory = path.dirname(directory);\n\t}\n};\n\nmodule.exports.exists = pathExists;\n\nmodule.exports.sync.exists = pathExists.sync;\n\nmodule.exports.stop = stop;\n","import DefaultConfig from \"./p5-cli.config.json\";\nimport findUp from 'find-up'\nimport apppath from 'app-root-path'\nimport path from 'path'\nimport fs from 'fs'\nimport _ from 'lodash'\n\nconst CONFIG_FILENAME = 'p5-cli.config.json'\n\nconst resolve = (filepath, basedir) => {\n    if (fs.existsSync(filepath)) {\n        return fs.realpathSync(filepath)\n    }\n    return path.join(basedir, filepath)\n    console.log('filepath:', filepath, 'not found')\n    const candidate = path.join(basedir, filepath)\n\n    if (fs.existsSync(candidate)) {\n        return fs.realpathSync(candidate)\n    }\n\n    return filepath\n}\n\nconst resolveMany = (object, paths, basedir) => {\n    paths.forEach(path => {\n        if ( ! _.has(object, path)) {\n            return\n        }\n        let old = _.get(object, path)\n        let resolved = resolve(old, basedir)\n        _.set(object, path, resolved)\n    })\n}\n\nconst projectPath = (startdir, configFilename) => {\n    //search here\n    if (fs.existsSync(path.join(startdir, configFilename))) {\n        return startdir\n    }\n    //search up\n    const match = findUp.sync(configFilename, {type: 'file'})\n    if (match) {\n        return path.dirname(match)\n    }\n    //no local config, so, no \"project\"\n    return undefined\n}\n\nconst localConfig = (dir, configFilename) => {\n    if (dir && configFilename && fs.existsSync(path.join(dir, configFilename))) {\n        return require(path.join(dir, configFilename))\n    }\n    return {}\n}\n\n// paths\nappdir = apppath.path\nprojectdir = projectPath(process.cwd(), CONFIG_FILENAME)\n\n// configs\nconst defaults = DefaultConfig\nconst local = localConfig(projectdir, CONFIG_FILENAME)\n\n// get default config\nresolveMany(defaults, ['templates.path'], appdir)\nresolveMany(defaults, ['serve.output', 'serve.cache'], process.cwd())\n\n// local config\nif (local) {\n    resolveMany(local, ['templates.path'], projectdir)\n    resolveMany(local, ['serve.output','serve.cache'], projectdir)\n}\n\n//merge\nconst config = _.defaultsDeep({}, local, defaults)\n\nexport default config\n","\nimport Command from \"../Command\";\n\nexport default class ConfigCommand extends Command {\n    run(config) {\n        console.log(JSON.stringify(config,null, 4))\n        return this\n    }\n}\n","import program from \"commander\";\nimport ArgumentError from \"./ArgumentError\";\nimport TemplatesCommand from \"./Command/Templates\";\nimport CloneCommand from \"./Command/Clone\";\nimport ServeCommand from \"./Command/Serve\";\nimport config from \"./config\";\nimport ConfigCommand from \"./Command/Config\";\n\n\n\nprogram\n    .version('0.1.0')\n\nprogram\n    .command('templates')\n    .alias('tpl')\n    .description('list available templates')\n    .action((cmd) => {\n        new TemplatesCommand()\n            .title('templates')\n            .run(config)\n            .close()\n    })\n\nprogram\n    .command('clone <template-name> [destination]')\n    .description('clone template intto target directory')\n    .action((tpl, dst, cmd) => {\n\n        dst = dst || `./${tpl}`\n\n        new CloneCommand()\n            .title('clone')\n            .run(config, tpl, dst)\n            .close()\n    })\n\nprogram\n    .command('config')\n    .description('display the current config')\n    .action((cmd)=>{\n        new ConfigCommand()\n            .title('config')\n            .run(config)\n            .close()\n    })\n\nprogram\n    .command('serve <sketch-path>')\n    .description('serve a sketch with parceljs')\n    .action((sketchPath, cmd) => {\n\n        new ServeCommand()\n            .title('serve')\n            .run(config, sketchPath)\n            // .close()\n    })\n\n\ntry {\n    program.parse(process.argv);\n\n    if ( ! process.argv.slice(2).length) {\n        program.help();\n    }\n\n} catch (e) {\n    if (e instanceof ArgumentError) {\n        console.log('error:', e.message);\n    } else {\n        throw e;\n    }\n}\n"],"names":["ArgumentError","Error","constructor","message","name","Command","run","config","console","log","title","chalk","magenta","info","msg","logicon","error","red","success","green","warning","yellow","close","TemplatesCommand","templatePaths","templates","path","map","filepath","blue","basename","folder","paths","fs","readdirSync","forEach","file","statSync","isDirectory","push","realpathSync","CloneCommand","templateName","target","has","createTargetFolder","template","resolve","clone","existsSync","mkdirp","autoIncrementFoldername","_","find","undefined","src","dst","copydir","sync","filter","stat","filename","templateNames","dir","tpl","fname","fpath","candidate","i","tag","toString","padStart","ServeCommand","entry","entrypoint","guessEntrypoint","entrydir","dirname","cmd","APP_ROOT","serve","output","cache","spawn","outputDirectory","stats","lstatSync","isFile","join","stdio","shell","pTry","pLimit","require$$0","pLocate","promisify","CONFIG_FILENAME","basedir","resolveMany","object","old","get","resolved","set","projectPath","startdir","configFilename","match","findUp","type","localConfig","require","appdir","apppath","projectdir","process","cwd","defaults","DefaultConfig","local","defaultsDeep","ConfigCommand","JSON","stringify","program","version","command","alias","description","action","sketchPath","parse","argv","slice","length","help","e"],"mappings":"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"}